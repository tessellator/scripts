#!/bin/bash

# GitHub Clone - Clone a repository into ~/src/github.com/<user>/<repo>
# Usage: git gh <user>/<repo>

if [ $# -eq 0 ]; then
    echo "Usage: git gh <user>/<repo>"
    echo "Example: git gh pydantic/pydantic-ai"
    exit 1
fi

REPO_ARG="$1"

if [[ ! "$REPO_ARG" =~ / ]]; then
    echo "Error: Repository must be in the format <user>/<repo>"
    exit 1
fi

# Extract user and repo name
REPO_USER=$(echo "$REPO_ARG" | cut -d'/' -f1)
REPO_NAME=$(echo "$REPO_ARG" | cut -d'/' -f2)

# Create the directory structure
DEST_DIR="$HOME/src/github.com/$REPO_USER"
mkdir -p "$DEST_DIR"

# Change to the directory and clone
cd "$DEST_DIR" || exit 1

echo "Cloning $REPO_ARG into $DEST_DIR/$REPO_NAME..."
git clone "git@github.com:$REPO_USER/$REPO_NAME.git"
